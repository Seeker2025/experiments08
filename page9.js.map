{"version":3,"file":"page9.js","sources":["../src/js/page_9.js"],"sourcesContent":["console.log('09');\n\nconst start = document.querySelector('.js-start');\nconst container = document.querySelector('.js-container');\n\nstart.addEventListener('click', onStart);\n// console.log(container.children);\n\n// function onStart() {\n//     const result = [];\n//     // console.dir(container);\n//     [...container.children].forEach((box ) => {box.textContent = \"\"});\n//     [...container.children].forEach((box, i) => {\n//         creationPromise(i)\n//         .then((smile)=>{\n//             box.textContent = smile;\n//             result.push('1');\n//         })\n//         .catch((smile)=>box.textContent=smile)\n//         .finally(()=>{\n//             setTimeout(()=>{\n//                 if(i === container.children.length - 1){\n//                     if(!result.length || result.length === 3){\n//                         alert('Winner!');\n//                     }\n//                     else{\n//                         alert('Lost money');\n//                     }\n//                 }\n//             }, 500)\n//          })\n// });\n// }\n\n// function creationPromise(deley) {\n//     return new Promise((res, rej) => {\n//         setTimeout(() => {\n//             const random = Math.random();\n//             if(random > .7){\n//                 res(\"ðŸ¤‘\");\n//             }\n//             else{\n//                 rej(\"ðŸ˜ˆ\");\n//             }\n//         }, 1000 * deley);\n     \n//     })\n// }\n\nfunction onStart() {\n    let counter = 0;\n    const result = [];\n    // console.dir(container);\n    [...container.children].forEach((box ) => {box.textContent = \"\"});\n    const promises = [...container.children].map((_, i) => creationPromise(i));\n    // console.log(promises);\n    Promise.allSettled(promises)\n    .then(items =>{\n        items.forEach((item, i)=>{\n            console.log(item);\n            setTimeout(()=>{\n                if(item.status === \"fulfilled\"){\n                    counter += 1;\n                }\n                container.children[i].textContent=item.value || item.reason;\n                   \n                if(container.children.length - 1 === i){\n                    setTimeout(()=>{\n                        if(counter === container.children.length || !counter){\n                            alert(\"Winner!\");\n                        }\n                        else{\n                            alert(\"Lost money!\");\n                        }\n                    }, 500);\n                  }\n            }, i * 1000)\n            // console.log(items);\n        })\n\n});\n}\n\n\nfunction creationPromise(deley) {\n    return new Promise((res, rej) => {\n        setTimeout(() => {\n            const random = Math.random();\n            if(random > .5){\n                res(\"ðŸ¤‘\");\n            }\n            else{\n                rej(\"ðŸ˜ˆ\");\n            }\n        }, 1000 * deley);\n     \n    })\n}"],"names":["start","container","onStart","counter","box","promises","_","i","creationPromise","items","item","deley","res","rej"],"mappings":"oCAAA,QAAQ,IAAI,IAAI,EAEhB,MAAMA,EAAQ,SAAS,cAAc,WAAW,EAC1CC,EAAY,SAAS,cAAc,eAAe,EAExDD,EAAM,iBAAiB,QAASE,CAAO,EA4CvC,SAASA,GAAU,CACf,IAAIC,EAAU,EAGd,CAAC,GAAGF,EAAU,QAAQ,EAAE,QAASG,GAAS,CAACA,EAAI,YAAc,EAAE,CAAC,EAChE,MAAMC,EAAW,CAAC,GAAGJ,EAAU,QAAQ,EAAE,IAAI,CAACK,EAAGC,IAAMC,EAAgBD,CAAC,CAAC,EAEzE,QAAQ,WAAWF,CAAQ,EAC1B,KAAKI,GAAQ,CACVA,EAAM,QAAQ,CAACC,EAAMH,IAAI,CACrB,QAAQ,IAAIG,CAAI,EAChB,WAAW,IAAI,CACRA,EAAK,SAAW,cACfP,GAAW,GAEfF,EAAU,SAASM,CAAC,EAAE,YAAYG,EAAK,OAASA,EAAK,OAElDT,EAAU,SAAS,OAAS,IAAMM,GACjC,WAAW,IAAI,CACRJ,IAAYF,EAAU,SAAS,QAAU,CAACE,EACzC,MAAM,SAAS,EAGf,MAAM,aAAa,CAE1B,EAAE,GAAG,CAEb,EAAEI,EAAI,GAAI,CAEd,CAAA,CAET,CAAC,CACD,CAGA,SAASC,EAAgBG,EAAO,CAC5B,OAAO,IAAI,QAAQ,CAACC,EAAKC,IAAQ,CAC7B,WAAW,IAAM,CACE,KAAK,OAAQ,EAChB,GACRD,EAAI,IAAI,EAGRC,EAAI,IAAI,CAExB,EAAW,IAAOF,CAAK,CAElB,CAAA,CACL"}